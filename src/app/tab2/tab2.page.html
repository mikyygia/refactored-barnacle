<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Log
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="card-container">
    <!-- Log Sleep Card -->
    <ion-card class="log-card">
      <ion-card-header>
        <ion-card-title>Track Your Sleep</ion-card-title>
        <ion-card-subtitle>Record your sleep schedule for today</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <div class="time-inputs">
          <ion-item>
            <ion-label>Bedtime</ion-label>
            <ion-datetime-button datetime="bedtime"></ion-datetime-button>
            <ion-modal [keepContentsMounted]="true">
              <ng-template>
                <ion-datetime id="bedtime" presentation="date-time"></ion-datetime>
              </ng-template>
            </ion-modal>
          </ion-item>

          <ion-item>
            <ion-label>Wake time</ion-label>
            <ion-datetime-button datetime="waketime"></ion-datetime-button>
            <ion-modal [keepContentsMounted]="true">
              <ng-template>
                <ion-datetime id="waketime" presentation="date-time"></ion-datetime>
              </ng-template>
            </ion-modal>
          </ion-item>
        </div>
        <ion-button class="submit-button"><ion-icon name="moon-outline" style="padding: 0 4px;"></ion-icon>Log Sleep</ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Log Sleepiness Card -->
    <ion-card class="log-card">
      <ion-card-header>
        <ion-card-title>Sleepiness Tracker</ion-card-title>
        <ion-card-subtitle>Log how sleepy you feel throughout the day</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <div class="title-row">
          <ion-card-title style="font-size: 16px; margin-top: 16px;">How sleepy are you right now?</ion-card-title>
          <div class="time-display">
            <ion-icon name="alarm-outline"></ion-icon>
            <span>{{ currentTime | date:'shortTime' }}</span>
          </div>
        </div>
        
        <!-- Cards for larger screens -->
        <div class="sleepiness-scale desktop-only">
          <ion-card button class="scale-card" [class.selected]="selectedLevel === 1">
            <ion-card-content>1<br>Wide Awake</ion-card-content>
          </ion-card>
          <ion-card button class="scale-card" [class.selected]="selectedLevel === 2">
            <ion-card-content>2<br>Functioning Good</ion-card-content>
          </ion-card>
          <ion-card button class="scale-card" [class.selected]="selectedLevel === 3">
            <ion-card-content>3<br>Relaxed</ion-card-content>
          </ion-card>
          <ion-card button class="scale-card" [class.selected]="selectedLevel === 4">
            <ion-card-content>4<br>A little foggy</ion-card-content>
          </ion-card>
          <ion-card button class="scale-card" [class.selected]="selectedLevel === 5">
            <ion-card-content>5<br>Foggy</ion-card-content>
          </ion-card>
          <ion-card button class="scale-card" [class.selected]="selectedLevel === 6">
            <ion-card-content>6<br>Sleepy</ion-card-content>
          </ion-card>
          <ion-card button class="scale-card" [class.selected]="selectedLevel === 7">
            <ion-card-content>7<br>Almost asleep</ion-card-content>
          </ion-card>
        </div>

        <!-- Dropdown for mobile -->
        <ion-item class="mobile-only">
          <ion-label>Sleepiness Level</ion-label>
          <ion-select [(ngModel)]="selectedLevel">
            <ion-select-option value="1">1 - Wide Awake</ion-select-option>
            <ion-select-option value="2">2 - Functioning Good</ion-select-option>
            <ion-select-option value="3">3 - Relaxed</ion-select-option>
            <ion-select-option value="4">4 - A little foggy</ion-select-option>
            <ion-select-option value="5">5 - Foggy</ion-select-option>
            <ion-select-option value="6">6 - Sleepy</ion-select-option>
            <ion-select-option value="7">7 - Almost asleep</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-label>Time</ion-label>
          <ion-datetime-button datetime="sleepinesstime"></ion-datetime-button>
          <ion-modal [keepContentsMounted]="true">
            <ng-template>
              <ion-datetime id="sleepinesstime" presentation="date-time"></ion-datetime>
            </ng-template>
          </ion-modal>
        </ion-item>

        <ion-item>
          <ion-label style="font-size: 1.2rem;" position="stacked">Notes (optional)</ion-label>
          <ion-textarea 
            placeholder="Add any context about how you're feeling..."
            [(ngModel)]="sleepinessNotes"
            rows="4">
          </ion-textarea>
        </ion-item>

        <ion-button class="submit-button"><ion-icon name="moon-outline" style="padding: 0 4px;"></ion-icon> Log Sleepiness Level</ion-button>

        <div class="scale-legend">
          <h4>Sleepiness Scale:</h4>
          <ion-list lines="none">
            <ion-item>1 - Wide awake: Feeling active, vital, alert</ion-item>
            <ion-item>2 - Functioning at high levels: Not at peak, able to concentrate</ion-item>
            <ion-item>3 - Relaxed: Awake but not fully alert</ion-item>
            <ion-item>4 - A little foggy: somewhat foggy, let down</ion-item>
            <ion-item>5 - Foggy: losing interest in remaining awake; slowed down</ion-item>
            <ion-item>6 - Very sleepy: Sleepy, woozy, fighting sleep; prefer to lie down</ion-item>
            <ion-item>7 - Almost asleep: No longer fighting sleep, sleep onset soon</ion-item>
          </ion-list>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
